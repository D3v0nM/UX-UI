language: node_js
node_js: stable
sudo: required
dist: trusty
install:
  - npm cache verify
  - npm install
stages:
  - test
  - name: build
    if: branch = develop
  - name: deploy
    if: branch = develop
jobs:
  include:
    - stage: test
      script: npm run test:unit
    - stage: build
      script: node upload.js
    - stage: deploy
      script: npm run build
